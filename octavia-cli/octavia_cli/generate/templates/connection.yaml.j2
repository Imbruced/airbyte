# Configuration for connection {{ connection_name }}
definition_type: connection
resource_name: {{ connection_name }}
source_id: {{ source_id }}
destination_id: {{ destination_id }}

# EDIT THE CONFIGURATION BELOW!
configuration:
  sourceId: {{ source_id }} # REQUIRED | string
  destinationId: {{ destination_id }} # REQUIRED | string
  status: active # REQUIRED | string | Allowed values: active, inactive, deprecated
  name: {{ connection_name }} # OPTIONAL | string | Optional name of the connection
  namespaceDefinition: source # OPTIONAL | string | Allowed values: source, destination, customformat
  namespaceFormat: "${SOURCE_NAMESPACE}" # OPTIONAL | string | Used when namespaceDefinition is 'customformat'. If blank then behaves like namespaceDefinition = 'destination'. If "${SOURCE_NAMESPACE}" then behaves like namespaceDefinition = 'source'.
  prefix: "" # REQUIRED | Prefix that will be prepended to the name of each stream when it is written to the destination
  resourceRequirements: # OPTIONAL | object | Resource requirements to run workers (blank for unbounded allocations)
    cpu_limit: "" # OPTIONAL
    cpu_request: "" # OPTIONAL
    memory_limit: "" # OPTIONAL
    memory_request: "" # OPTIONAL
  schedule: # OPTIONAL | object
    timeUnit: hours # REQUIRED | string | Allowed values: minutes, hours, days, weeks, months
    units: 1 # REQUIRED | integer
  {%- if enable_normalization %}
  operations:
    - name: "Normalization"
      operatorConfiguration:
        normalization:
          option: "basic"
        operatorType: "normalization"
  {%- else %}
  # operations:
  ## -------- Uncomment and edit the block below if you want to enable Airbyte normalization --------
  #   - name: "Normalization"
  #     operatorConfiguration:
  #       normalization:
  #         option: "basic"
  #       operatorType: "normalization"
  ## -------- Uncomment and edit the block below if you want to declare a custom transformation --------
  #   - name: "My dbt transformations" # REQUIRED | string
  #     operatorConfiguration:
  #       dbt:
  #         dbtArguments: "run" # REQUIRED | string | Entrypoint arguments for dbt cli to run the project 
  #         dockerImage: "fishtownanalytics/dbt:0.19.1" # REQUIRED | string | Docker image URL with dbt installed
  #         gitRepoBranch: "your-repo-branch-name" # OPTIONAL | string | Git branch name
  #         gitRepoUrl: "https://github.com/<your git repo>" # REQUIRED | string | Git repository URL of the custom transformation project
  #       operatorType: dbt # REQUIRED | string | Allowed values: dbt, normalization
  {%- endif %}
  syncCatalog: # OPTIONAL | object | ðŸš¨ ONLY edit streams.config, streams.stream should not be edited as schema cannot be changed.
    {{ catalog | indent(4)}}
